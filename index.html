<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SObserv - Observation médicale</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="sobserv-favicon.svg">
    <link rel="icon" type="image/png" href="sobserv-favicon.png">
</head>
<body>
    <button id="menuButton" class="menu-button" aria-expanded="false" aria-controls="menuDropdown">☰</button>
    <div class="menu-overlay"></div>
    <nav id="menuDropdown" class="menu-dropdown" aria-label="Menu principal">
        <a href="index.html" class="menu-item">Observations</a>
        <a href="echo.html" class="menu-item">Échographie</a>
        <a href="profile.html" id="profileLink" class="menu-item">Profil</a>
        <a href="#" id="authButton" class="menu-item">Connexion</a>
    </nav>
    </div>
    <header>
        <h1 class="title">SObserv</h1>
    </header>
    <div class="container">
        <div class="left-column">
            <div class="tab-bar">
                <button class="tab-button active" data-tab="general">Général</button>
                <button class="tab-button" data-tab="favorites">Favoris</button>
            </div>
            <div id="general-content" class="tab-content active">
                <div class="categories-container" id="categories"></div>
            </div>
            <div id="favorites-content" class="tab-content">
                <div class="favorites-buttons">
                    <button class="favorite-btn" data-favorite="examen-normal">Examen normal</button>
                    <button class="favorite-btn" data-favorite="angine-strepta-plus">Angine Strepta +</button>
                    <button class="favorite-btn" data-favorite="angine-strepta-minus">Angine Strepta -</button>
                    <button class="favorite-btn" data-favorite="colique-nephretique">Clq néphrétique</button>
                    <button class="favorite-btn" data-favorite="conjonctivite">Conjonctivite</button>
                    <button class="favorite-btn" data-favorite="coqueluche">Coqueluche</button>
                    <button class="favorite-btn" data-favorite="cystite">Cystite</button>
                    <button class="favorite-btn" data-favorite="deces">Décès</button>
                    <button class="favorite-btn" data-favorite="depression">Dépression</button>
                    <button class="favorite-btn" data-favorite="gastro">Gastro</button>
                    <button class="favorite-btn" data-favorite="lumbago">Lumbago</button>
                    <button class="favorite-btn" data-favorite="migraine">Migraine</button>
                    <button class="favorite-btn" data-favorite="oma">OMA</button>
                    <button class="favorite-btn" data-favorite="Sinusite frontale">Sinusite frontale</button>
                    <button class="favorite-btn" data-favorite="Sinusite maxillaire">Sinusite maxillaire</button>
                    <button class="favorite-btn" data-favorite="syndrome-grippal">Sd grippal</button>
                    <div class="dropdown">
                        <button class="favorite-btn dropdown-btn" data-favorite="Entorses">Entorses</button>
                        <div class="dropdown-content">
                            <button class="favorite-btn" data-favorite="entorse-cheville">Entorse cheville</button>
                            <button class="favorite-btn" data-favorite="entorse-genou">Entorse genou</button>
                            <button class="favorite-btn" data-favorite="entorse-poignet">Entorse poignet</button>
                            <button class="favorite-btn" data-favorite="entorse-doigt">Entorse doigt</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="report-section">
            <textarea id="reportText" readonly placeholder="Le texte généré apparaîtra ici au fur et à mesure que vous cochez les cases"></textarea>
            <div class="buttons-container">
                <button id="copyButton">Copier le rapport</button>
                <button id="resetButton">Réinitialiser</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
    function startSignIn() {
        const clientId = '182475585314-dbratp3otrkoblugg5gnqdaetdedqps6.apps.googleusercontent.com';
        const redirectUri = 'http://127.0.0.1:5500/callback.html';
        const scope = 'email profile';
        const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token&scope=${scope}`;
        window.location.href = authUrl;
    }
    </script>
    <script>
        function handleAuth() {
            const userInfo = localStorage.getItem('userInfo');
            if (userInfo) {
                // L'utilisateur est connecté, on le déconnecte
                localStorage.removeItem('userInfo');
                updateAuthButton();
                alert('Vous avez été déconnecté.');
            } else {
                // L'utilisateur n'est pas connecté, on lance la connexion
                startSignIn();
            }
        }
        
        function updateAuthButton() {
            const authButton = document.getElementById('authButton');
            const profileLink = document.getElementById('profileLink');
            const userInfo = localStorage.getItem('userInfo');
            if (userInfo) {
                const user = JSON.parse(userInfo);
                authButton.textContent = `Déconnexion (${user.name})`;
                profileLink.style.display = 'block';
            } else {
                authButton.textContent = 'Connexion Google';
                profileLink.style.display = 'none';
            }
        }
        
        function startSignIn() {
            const clientId = '182475585314-dbratp3otrkoblugg5gnqdaetdedqps6.apps.googleusercontent.com';
            const redirectUri = 'http://127.0.0.1:5500/callback.html';
            const scope = 'email profile';
            const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token&scope=${scope}`;
            window.location.href = authUrl;
        }
        
        // Mettre à jour le bouton au chargement de la page
        document.addEventListener('DOMContentLoaded', updateAuthButton);
        </script>
</body>
</html>